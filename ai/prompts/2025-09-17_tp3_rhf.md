---
Title: TP3 – Formulaire (RHF + Zod)
Date: 2025-11-18T00:00:00Z
Owner: Mathys
Scope: `app/(main)/tp3-forms/rhf/index.tsx`
OutOfScope: Formik/Yup, DB
---

## Objectif

Implémenter/affiner la version RHF avec schéma Zod, en privilégiant la performance (inputs non contrôlés, Controller) et la DX typée.

## Contexte

- Deux versions switchables (Formik ←→ RHF) via bouton header.
- `@hookform/resolvers` pour brancher Zod.

## Contraintes

- `Controller` pour `TextInput` RN.
- `formState.errors` pour afficher les erreurs.
- Types inférés depuis Zod (`z.infer`).

## Étapes proposées à l'IA (agent)

1. Définir schéma Zod et en déduire le type.
2. Configurer `useForm` + `zodResolver`.
3. Mapper les champs via `Controller`.
4. Ajout du switch ⇄ Formik dans le header.
5. Auto-revue: limiter les re-rendus, `React.memo` si besoin.

## Critères d'acceptation

- Soumission bloquée si invalide; erreurs visibles par champ.
- Types corrects partout (pas de `any` inutiles).

## Plan de test minimal

- Happy path valide → onSubmit appelé.
- Cas invalide → erreurs par champ.

## Risques & mitigations

- Conflits focus/clavier: vérifier `keyboardShouldPersistTaps`.
- Performance: éviter rerenders en remontant un state contrôlé.
